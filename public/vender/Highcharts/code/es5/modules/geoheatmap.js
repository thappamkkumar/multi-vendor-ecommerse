/**
 * Highcharts JS v11.3.0 (2024-01-10)
 *
 * (c) 2009-2024
 *
 * License: www.highcharts.com/license
 */!function(t){"object"==typeof module&&module.exports?(t.default=t,module.exports=t):"function"==typeof define&&define.amd?define("highcharts/modules/geoheatmap",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";var e=t?t._modules:{};function i(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}i(e,"Series/GeoHeatmap/GeoHeatmapPoint.js",[e["Core/Utilities.js"],e["Core/Series/SeriesRegistry.js"]],function(t,e){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=e.seriesTypes.map.prototype.pointClass,r=t.isNumber;return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.applyOptions=function(e,i){var o=t.prototype.applyOptions.call(this,e,i),n=o.options,a=n.lat,s=n.lon;if(r(s)&&r(a)){var p=this.series.options,l=p.colsize,h=void 0===l?1:l,c=p.rowsize,u=void 0===c?1:c,d=s-h/2,y=a-u/2;o.geometry=o.options.geometry={type:"Polygon",coordinates:[[[d,y],[d+h,y],[d+h,y+u],[d,y+u],[d,y]]]}}return o},e}(n)}),i(e,"Series/InterpolationUtilities.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(t,e){var i=t.doc,o=e.defined,n=e.pick;return{colorFromPoint:function(t,e){var i=e.series.colorAxis;if(i){var r=i.toColor(t||0,e).split(")")[0].split("(")[1].split(",").map(function(t){return n(parseFloat(t),parseInt(t,10))});return r[3]=255*n(r[3],1),o(t)&&e.visible||(r[3]=0),r}return[0,0,0,0]},getContext:function(t){var e=t.canvas,o=t.context;return e&&o?(o.clearRect(0,0,e.width,e.height),o):(t.canvas=i.createElement("canvas"),t.context=t.canvas.getContext("2d",{willReadFrequently:!0})||void 0,t.context)}}}),i(e,"Series/GeoHeatmap/GeoHeatmapSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/GeoHeatmap/GeoHeatmapPoint.js"],e["Core/Globals.js"],e["Series/InterpolationUtilities.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(t,e,i,o,n,r){var a,s=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=t.animObject,l=t.stop,h=i.noop,c=o.colorFromPoint,u=o.getContext,d=n.seriesTypes.map,y=r.addEvent,f=r.extend,g=r.isNumber,m=r.isObject,v=r.merge,b=r.pick;function w(t){return t-360*Math.floor((t+180)/360)}var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDirtyCanvas=!0,e}return s(e,t),e.prototype.update=function(){this.options=v(this.options,arguments[0]),this.getInterpolation().enabled&&(this.isDirtyCanvas=!0,this.points.forEach(function(t){t.graphic&&(t.graphic.destroy(),delete t.graphic)})),t.prototype.update.apply(this,arguments)},e.prototype.translate=function(){(!this.getInterpolation().enabled||!this.image||this.isDirty||this.isDirtyData)&&t.prototype.translate.apply(this,arguments)},e.prototype.getInterpolation=function(){return m(this.options.interpolation)?this.options.interpolation:{blur:1,enabled:this.options.interpolation}},e.prototype.drawPoints=function(){var e=this.chart.mapView,i=this.options;if(this.getInterpolation().enabled&&e&&this.bounds){var o=this.context||u(this),n=this.canvas,r=this.colorAxis,a=this.image,s=this.chart,h=this.points,d=[b(i.colsize,1),b(i.rowsize,1)],y=d[0],f=d[1],m=e.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2}),w=e.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});if(n&&o&&r&&m&&w){var x={x:m.x,y:m.y,width:w.x-m.x,height:w.y-m.y};if(this.isDirtyCanvas||this.isDirtyData||"Orthographic"===e.projection.options.name){this.isDirtyCanvas=!0;var C=n.width=~~(360/y)+1,j=n.height=~~(180/f)+1,D=C*j,_=new Uint8ClampedArray(4*D);this.directTouch=!1;for(var O=0;O<h.length;O++){var P=h[O],I=new Uint8ClampedArray(c(P.value,P)),U=P.options,T=U.lon,A=U.lat;g(T)&&g(A)&&_.set(I,4*Math.ceil(C*(j-1-(A+90)/f)+(T+180)/y))}var S=this.getInterpolation().blur,L=0===S?1:11*S,H=~~(C*L),E=~~(j*L),G=~~x.width,R=~~x.height,z=new ImageData(_,C,j);n.width=H,n.height=E,o.putImageData(z,0,0),o.globalCompositeOperation="copy",o.drawImage(n,0,0,z.width,z.height,0,0,n.width,n.height);var k=o.getImageData(0,0,n.width,n.height),M=this.getProjectedImageData(e,G,R,k,n,x.x,x.y),N=new ImageData(M,G,R);o.globalCompositeOperation="copy",n.width=G,n.height=R,o.putImageData(N,0,0)}if(a){if(s.renderer.globalAnimation&&s.hasRendered){var F=Number(a.attr("x")),X=Number(a.attr("y")),V=Number(a.attr("width")),Y=Number(a.attr("height")),q=function(t,e){a.attr({x:F+(x.x-F)*e.pos,y:X+(x.y-X)*e.pos,width:V+(x.width-V)*e.pos,height:Y+(x.height-Y)*e.pos})},J=v(p(s.renderer.globalAnimation)),K=J.step;J.step=function(){K&&K.apply(this,arguments),q.apply(this,arguments)},a.attr(v({animator:0},this.isDirtyCanvas?{href:n.toDataURL("image/png",1)}:void 0)).animate({animator:1},J)}else l(a),a.attr(v(x,this.isDirtyCanvas?{href:n.toDataURL("image/png",1)}:void 0))}else this.image=s.renderer.image(n.toDataURL("image/png",1)).attr(x).add(this.group);this.isDirtyCanvas=!1}}else t.prototype.drawPoints.apply(this,arguments)},e.prototype.getProjectedImageData=function(t,e,i,o,n,r,a){for(var s,p=new Uint8ClampedArray(e*i*4),l=b(null===(s=t.projection.options.rotation)||void 0===s?void 0:s[0],0),h=n.width/360,c=-1*n.height/180,u=-1,d=0;d<p.length;d+=4){var y=d/4%e;0===y&&u++;var f=t.pixelsToLonLat({x:r+y,y:a+u});if(f){f.lon>-180-l&&f.lon<180-l&&(f.lon=w(f.lon));var g=[f.lon,f.lat],m=g[0]*h+n.width/2,v=g[1]*c+n.height/2;if(m>=0&&m<=n.width&&v>=0&&v<=n.height){var x=Math.floor(v)*n.width*4+4*Math.round(m);p[d]=o.data[x],p[d+1]=o.data[x+1],p[d+2]=o.data[x+2],p[d+3]=o.data[x+3]}}}return p},e.prototype.searchPoint=function(t,e){var i=this.chart,o=i.mapView;if(o&&this.bounds&&this.image&&i.tooltip&&i.tooltip.options.enabled){if(!1===i.pointer.hasDragged&&(.01>=+this.image.attr("animator")||+this.image.attr("animator")>=.99)){var n=o.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2}),r=o.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});if(i.pointer.normalize(t),t.lon&&t.lat&&n&&r&&t.chartX-i.plotLeft>n.x&&t.chartX-i.plotLeft<r.x&&t.chartY-i.plotTop>n.y&&t.chartY-i.plotTop<r.y)return this.searchKDTree({clientX:t.chartX,lon:w(t.lon),lat:t.lat},e,t)}else i.tooltip.destroy()}},e.defaultOptions=v(d.defaultOptions,{nullColor:"transparent",tooltip:{pointFormat:"Lat: {point.lat}, Lon: {point.lon}, Value: {point.value}<br/>"},borderWidth:0,colsize:1,rowsize:1,stickyTracking:!0,interpolation:{enabled:!1,blur:1}}),e}(d);return y(x,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),f(x.prototype,{type:"geoheatmap",applyJitter:h,pointClass:e,pointArrayMap:["lon","lat","value"],kdAxisArray:["lon","lat"]}),n.registerSeriesType("geoheatmap",x),x}),i(e,"masters/modules/geoheatmap.src.js",[],function(){})});